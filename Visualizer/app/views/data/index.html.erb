<div class="container">

	<div id="title" class="navbar">
		<div class="navbar-inner">
			<a class="brand" href="#">HYRISE Visualizer</a>

			<%= form_tag({controller: 'data', action: 'load_table'}, {:class => 'navbar-form pull-right'}) do %>
				<%= text_field_tag(:table, nil, { placeholder: 'Table Name', :class => 'span2'}) %>
				<%= text_field_tag(:file, nil, { placeholder: 'Table File', :class => 'span2'}) %>
				<%= submit_tag('Load New Table', :class => 'btn') %>
			<% end %> 
			<!--<form class="navbar-form pull-right">
				<select>
					<option value="tables/employees.tbl">employees</option>
					<option value="tables/companies.tbl">companies</option>
				</select>
				<input type="submit" class="btn btn-primary" value="Load"></input>
			</form>-->

		</div>
	</div>

	<div id="attributes">
		<h3> Attributes </h3>
		<div class="subHeading" > Employees </div>
		<div class="btn disabled column" data-column="id" data-aggregation="none" data-type="1" data-id="0">Id

			<%= render 'column_settings' %>

		</div>
		<div class="btn disabled column" data-column="name" data-mode="select">Name

		<div class="btn-group" style="float:right;">
				<button class="btn btn-mini dropdown-toggle actionSelect"  data-toggle="dropdown">Action<span class="caret"></span></button>

				<ul class="dropdown-menu">
					<li>
	    				<a class="modeSelect" mode="select">Select</a>
	    			</li>
	    			<li>
	    				<a class="modeSelect" mode="group">Group</a>
	    			</li>
	    			<li>
	    				<a class="modeSelect" mode="order">Order by</a>
	    			</li>
	  			</ul>
			</div>

		</div>
		<div class="btn disabled" data-column="surname">Surname</div>
		<div class="btn disabled">Name</div>
		<div class="btn disabled">Company</div>

		<div class="subHeading"> Companies </div>
		<div class="btn disabled">Id</div>
		<div class="btn disabled">Name</div>
		<div class="btn disabled">Manager</div>

		<% index = 0 %>
		<% @scheme.each_pair do | table, columns| %>
			<div class="subHeading"> <%= table %></div>
			<% columns.each do | column | %>
				<div class="btn disabled column" data-column="<%= column[:name] %>" data-table="<%= table %>" data-aggregation="none" data-type="<%= column[:type] %>" data-id="<%= index %>" data-chartType="line"> 	
					
					<button type="button" class="close removeColumn">Ã—</button>

					<%= column[:name] %> 
					<span class="btn btn-small popoverToggle" rel="popover" data-toggle="popover"><i class="icon-cog"></i></span>
		  			<div class="popoverContent">
		  				<form class="form-horizontal">
							<div class="control-group">
								<label class="control-label" for="aggregationSelect">Aggregation:</label>
								<div class="controls">
									<div class="btn-group">
										<button class="btn dropdown-toggle aggrSelectToggle" data-toggle="dropdown">
											None
											<span class="caret"></span>
										</button>
										<ul class="dropdown-menu">
											<li><a class="aggrSelect" value="none">None</a></li>
											<li><a class="aggrSelect" value="count">Count</a></li>
											<li><a class="aggrSelect" value="average">Average</a></li>
											<li><a class="aggrSelect" value="sum">Sum</a></li>
										</ul>
									</div>
								</div>
							</div>
							<div class="control-group">
								<label class="control-label" for="chartTypeSelect">Type:</label>
								<div class="controls">
									<div class="btn-group">
										<button class="btn dropdown-toggle typeSelectToggle" data-toggle="dropdown">
											Line
											<span class="caret"></span>
										</button>
										<ul class="dropdown-menu">
											<li class="nav-header">Lines</li>
											<li><a class="typeSelect" value="line">Line</a></li>
											<li><a class="typeSelect" value="spline">Spline</a></li>
											<li class="nav-header">Bars</li>
											<li><a class="typeSelect" value="bar">Bar</a></li>
											<li><a class="typeSelect" value="column">Column</a></li>
											<li class="nav-header">Areas</li>
											<li><a class="typeSelect" value="area">Area</a></li>
											<li><a class="typeSelect" value="areaspline">Areaspline</a></li>
											<li class="nav-header">Others</li>
											<li><a class="typeSelect" value="scatter">Scatter</a></li>
											<li><a class="typeSelect" value="pie">Pie</a></li>
										</ul>
									</div>
								</div>
							</div>
							<% if column[:type] == 0 || column[:type] == 1 %>
							<div class="control-group">
								<label class="control-label" for="valueRangeSlider">Value range:</label>
								<div class="controls">
									<%= column[:min] %><div class="valueRangeSlider" style="margin-left:20px;width:60px; float:left;" data-min-value="<%= column[:min] %>" data-max-value="<%= column[:max] %>"></div><%= column[:max] %>
								</div>
							</div>
							<% end %>
						</form>
					</div>

					<%= column[:name] %>
					<%= render 'column_settings' %>

				</div>
				<% index += 1 %>
			<% end %>
		<% end %>
	</div>
	
	<%= render 'graph_options' %>

	<div class="axis" id="ySettings">
		<h3> y-Axis </h3>
		<%= render 'axis_settings', axis: 'yAxis' %>
	</div>
	<div id="graph" style="width:100%; height:400px;"></div>
	<div class="axis" id="oppositeYSettings">
		<h3> opposite y-Axis </h3>
		<%= render 'axis_settings', axis: 'oAxis' %>
	</div>
	<div class="axis" id="xSettings">
		<h3> x-Axis </h3>
		<%= render 'axis_settings', axis: 'xAxis' %>
	</div>

	<%= render 'data_table' %>
	
</div>